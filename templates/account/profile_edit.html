{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}Edit Profile | ShopperMart{% endblock %}

{% block content %}
<div class="container py-4">
  <div style="max-width: 800px; margin: 0 auto;">
    <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 2rem;">Edit Profile</h1>

    <div class="card">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <h4
          style="margin-bottom: 1rem; color: var(--primary); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem;">
          Account Info</h4>
        <div class="form-grid mb-4" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <label class="form-label">{{ uform.username.label }}</label>
            {% render_field uform.username class="form-control" %}
          </div>
          <div>
            <label class="form-label">{{ uform.email.label }}</label>
            {% render_field uform.email class="form-control" %}
          </div>
        </div>

        <h4
          style="margin-bottom: 1rem; color: var(--primary); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem;">
          Personal Details</h4>
        <div class="form-grid mb-4" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div style="grid-column: 1 / -1;">
            <label class="form-label">{{ pform.full_name.label }}</label>
            {% render_field pform.full_name class="form-control" %}
          </div>
          <div>
            <label class="form-label">{{ pform.phone.label }}</label>
            {% render_field pform.phone class="form-control" %}
          </div>
          <div>
            <label class="form-label">{{ pform.avatar.label }}</label>
            {% render_field pform.avatar class="form-control" style="padding: 0.4rem;" %}
          </div>
        </div>

        <h4
          style="margin-bottom: 1rem; color: var(--primary); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem;">
          Address</h4>
        <div class="form-grid mb-4" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div style="grid-column: 1 / -1;">
            <label class="form-label">{{ pform.address_line1.label }}</label>
            {% render_field pform.address_line1 class="form-control" %}
          </div>
          <div style="grid-column: 1 / -1;">
            <label class="form-label">{{ pform.address_line2.label }}</label>
            {% render_field pform.address_line2 class="form-control" %}
          </div>

          <div>
            <label class="form-label">{{ pform.city.label }}</label>
            {% render_field pform.city class="form-control" %}
          </div>
          <div>
            <label class="form-label">{{ pform.state.label }}</label>
            {% render_field pform.state class="form-control" %}
          </div>
          <div>
            <label class="form-label">{{ pform.pincode.label }}</label>
            {% render_field pform.pincode class="form-control" %}
          </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
          <button type="submit" class="btn btn-primary w-100">Save Changes</button>
          <a href="{% url 'profile' %}" class="btn btn-outline">Cancel</a>
        </div>

      </form>
    </div>
  </div>
</div>

<style>
  .form-label {
    font-weight: 500;
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
    display: block;
  }

  @media(max-width: 600px) {
    .form-grid {
      grid-template-columns: 1fr !important;
    }
  }
</style>
{% endblock %}